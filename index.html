<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#8b4513">
    <meta name="description" content="Expert field guide for identifying and authenticating valuable Caucasian carpet fragments">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Carpet Expert">
    <link rel="manifest" id="manifest-placeholder">
    <title>Carpet Expert</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'carpet-dark': '#1a1a2e',
                        'carpet-medium': '#2d3250',
                        'carpet-light': '#424769',
                        'carpet-gold': '#ffd700',
                        'carpet-bronze': '#d2691e',
                        'carpet-copper': '#8b4513',
                    }
                }
            }
        }
    </script>
    <style>
        input, select, textarea { font-size: 16px !important; }
        html { scroll-behavior: smooth; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes slideDown { from { opacity: 0; transform: translate(-50%, -100%); } to { opacity: 1; transform: translate(-50%, 0); } }
        .fade-in { animation: fadeIn 0.5s; }
        .slide-in { animation: slideIn 0.5s; }
        .search-highlight { background-color: rgba(255, 215, 0, 0.2) !important; border: 3px solid #ffd700 !important; }
    </style>
</head>
<body class="bg-gradient-to-br from-carpet-dark to-[#16213e] text-gray-200 min-h-screen font-serif">
    
    <!-- Install Prompt -->
    <div id="installPrompt" class="hidden mx-4 mt-4 bg-gradient-to-r from-green-700 to-green-600 text-white p-4 rounded-xl shadow-lg">
        <div class="flex items-center justify-between">
            <div class="flex-1">
                <p class="font-bold text-sm md:text-base">üì± Install Carpet Expert</p>
                <p class="text-xs md:text-sm opacity-90">Works offline in bazaars</p>
            </div>
            <button onclick="installPWA()" class="bg-white text-green-700 px-4 py-2 rounded-lg font-bold text-sm ml-3 hover:bg-green-50">
                Install
            </button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto px-3 md:px-6 py-4 md:py-6">
        
        <!-- Header -->
        <header class="bg-gradient-to-r from-carpet-copper to-carpet-bronze p-4 md:p-8 rounded-xl md:rounded-2xl mb-4 md:mb-6 shadow-2xl text-center">
            <h1 class="text-2xl md:text-4xl lg:text-5xl font-bold mb-2 md:mb-3 text-shadow">üß≠ Carpet Fragment Expert</h1>
            <p class="text-sm md:text-lg lg:text-xl opacity-90 italic">Armenia ‚Ä¢ Azerbaijan ‚Ä¢ Georgia ‚Ä¢ Albania ‚Ä¢ Bulgaria</p>
            <div class="mt-3 md:mt-4 text-xs md:text-sm bg-black bg-opacity-20 inline-block px-4 py-2 rounded-lg">
                <span class="inline-block mr-2">‚úì Offline Ready</span>
                <span class="inline-block">‚úì Mobile Optimized</span>
            </div>
        </header>

        <!-- Priority Finds Quick Reference -->
        <div class="bg-gradient-to-r from-red-900 to-red-700 p-4 md:p-6 rounded-xl md:rounded-2xl mb-4 md:mb-6 border-4 border-carpet-gold shadow-xl">
            <div class="flex items-center justify-between mb-3 md:mb-4 cursor-pointer" onclick="togglePriorityBuys()">
                <h2 class="text-lg md:text-2xl font-bold text-carpet-gold">‚ö° PRIORITY BUYS - Quick Recognition</h2>
                <button id="priorityToggle" class="bg-black bg-opacity-30 hover:bg-opacity-50 px-3 md:px-4 py-2 rounded-lg font-bold text-sm md:text-base transition-all">
                    ‚ñº Hide
                </button>
            </div>
            <div id="priorityBuysContent" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
                <div class="bg-black bg-opacity-30 p-3 md:p-4 rounded-lg">
                    <div class="text-carpet-gold font-bold text-base md:text-lg mb-1">üêâ Armenian Dragon</div>
                    <div class="text-xs md:text-sm mb-1">S-curved vishap motif</div>
                    <div class="text-green-400 font-bold text-sm md:text-base">$8K-$80K+</div>
                </div>
                <div class="bg-black bg-opacity-30 p-3 md:p-4 rounded-lg">
                    <div class="text-carpet-gold font-bold text-base md:text-lg mb-1">üïå Shirvan Prayer</div>
                    <div class="text-xs md:text-sm mb-1">Mihrab arch, tight weave</div>
                    <div class="text-green-400 font-bold text-sm md:text-base">$5K-$40K</div>
                </div>
                <div class="bg-black bg-opacity-30 p-3 md:p-4 rounded-lg">
                    <div class="text-carpet-gold font-bold text-base md:text-lg mb-1">üåπ Chiprovtsi</div>
                    <div class="text-xs md:text-sm mb-1">Reversible UNESCO</div>
                    <div class="text-green-400 font-bold text-sm md:text-base">$2K-$40K</div>
                </div>
                <div class="bg-black bg-opacity-30 p-3 md:p-4 rounded-lg">
                    <div class="text-carpet-gold font-bold text-base md:text-lg mb-1">üíé Kuba/Chi-Chi</div>
                    <div class="text-xs md:text-sm mb-1">150-250 KPSI fine weave</div>
                    <div class="text-green-400 font-bold text-sm md:text-base">$10K-$60K</div>
                </div>
                <div class="bg-black bg-opacity-30 p-3 md:p-4 rounded-lg">
                    <div class="text-carpet-gold font-bold text-base md:text-lg mb-1">üìú Inscriptions</div>
                    <div class="text-xs md:text-sm mb-1">Armenian/Georgian dates</div>
                    <div class="text-green-400 font-bold text-sm md:text-base">+40-60% value</div>
                </div>
                <div class="bg-black bg-opacity-30 p-3 md:p-4 rounded-lg">
                    <div class="text-carpet-gold font-bold text-base md:text-lg mb-1">üß∂ Wool+Natural</div>
                    <div class="text-xs md:text-sm mb-1">Pre-1860s technology</div>
                    <div class="text-green-400 font-bold text-sm md:text-base">$15K-$80K+</div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex flex-wrap gap-2 mb-4 md:mb-6">
            <button onclick="switchTab('quick-id')" class="tab-btn active px-3 md:px-6 py-2 md:py-3 bg-carpet-medium text-white rounded-lg text-sm md:text-base font-semibold transition-all hover:bg-carpet-light">
                Quick ID
            </button>
            <button onclick="switchTab('search')" class="tab-btn px-3 md:px-6 py-2 md:py-3 bg-carpet-medium text-white rounded-lg text-sm md:text-base font-semibold transition-all hover:bg-carpet-light">
                Search
            </button>
            <button onclick="switchTab('symbols')" class="tab-btn px-3 md:px-6 py-2 md:py-3 bg-carpet-medium text-white rounded-lg text-sm md:text-base font-semibold transition-all hover:bg-carpet-light">
                Symbols
            </button>
            <button onclick="switchTab('regions')" class="tab-btn px-3 md:px-6 py-2 md:py-3 bg-carpet-medium text-white rounded-lg text-sm md:text-base font-semibold transition-all hover:bg-carpet-light">
                Regions
            </button>
            <button onclick="switchTab('dating')" class="tab-btn px-3 md:px-6 py-2 md:py-3 bg-carpet-medium text-white rounded-lg text-sm md:text-base font-semibold transition-all hover:bg-carpet-light">
                Dating
            </button>
        </div>

        <!-- QUICK ID TAB -->
        <div id="quick-id" class="tab-content active fade-in">
            <div class="bg-gradient-to-br from-carpet-medium to-carpet-dark p-4 md:p-8 rounded-xl md:rounded-2xl border-4 border-carpet-bronze shadow-xl">
                <h2 class="text-xl md:text-3xl font-bold text-carpet-gold mb-4 md:mb-6">‚ö° Quick Fragment Identifier</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm md:text-base font-bold mb-2">Region:</label>
                        <select id="region" class="w-full p-3 md:p-4 rounded-lg bg-carpet-dark border-2 border-carpet-light text-white text-sm md:text-base">
                            <option value="">Select region...</option>
                            <option value="armenia">Armenia</option>
                            <option value="azerbaijan">Azerbaijan</option>
                            <option value="georgia">Georgia</option>
                            <option value="albania">Albania</option>
                            <option value="bulgaria">Bulgaria</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm md:text-base font-bold mb-2">Primary Colors:</label>
                        <select id="colors" class="w-full p-3 md:p-4 rounded-lg bg-carpet-dark border-2 border-carpet-light text-white text-sm md:text-base">
                            <option value="">Select colors...</option>
                            <option value="red-blue">Deep reds with indigo blues</option>
                            <option value="rust-cream">Rust, cream, brown earth tones</option>
                            <option value="vibrant">Vibrant reds, yellows, greens</option>
                            <option value="muted">Muted pastels, natural dyes</option>
                            <option value="black-white">Black, white, natural wool</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm md:text-base font-bold mb-2">Knot Density (KPSI):</label>
                        <select id="knotDensity" class="w-full p-3 md:p-4 rounded-lg bg-carpet-dark border-2 border-carpet-light text-white text-sm md:text-base">
                            <option value="">Select density...</option>
                            <option value="low">Low (40-80 KPSI)</option>
                            <option value="medium">Medium (80-150 KPSI)</option>
                            <option value="high">High (150-300 KPSI)</option>
                            <option value="very-high">Very High (300+ KPSI)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm md:text-base font-bold mb-2">Symbols/Motifs:</label>
                        <textarea id="symbols" rows="3" class="w-full p-3 md:p-4 rounded-lg bg-carpet-dark border-2 border-carpet-light text-white text-sm md:text-base" placeholder="dragon, prayer niche, geometric medallions, etc."></textarea>
                    </div>

                    <div>
                        <label class="block text-sm md:text-base font-bold mb-2">Weaving Technique:</label>
                        <select id="technique" class="w-full p-3 md:p-4 rounded-lg bg-carpet-dark border-2 border-carpet-light text-white text-sm md:text-base">
                            <option value="">Select technique...</option>
                            <option value="pile">Knotted pile</option>
                            <option value="kilim">Flat-weave kilim</option>
                            <option value="soumak">Soumak (weft wrapping)</option>
                            <option value="mixed">Mixed technique</option>
                        </select>
                    </div>

                    <button onclick="identifyFragment()" class="w-full bg-gradient-to-r from-carpet-bronze to-carpet-copper text-white py-4 md:py-5 rounded-xl text-base md:text-lg font-bold hover:shadow-2xl transition-all transform hover:scale-[1.02] active:scale-[0.98]">
                        üîç Identify Fragment
                    </button>

                    <div id="resultBox" class="hidden mt-6 bg-carpet-light p-4 md:p-6 rounded-xl border-4 border-carpet-gold"></div>
                </div>
            </div>
        </div>

        <!-- SEARCH TAB -->
        <div id="search" class="tab-content hidden">
            <div class="bg-carpet-medium p-4 md:p-6 rounded-xl shadow-xl">
                <h2 class="text-xl md:text-2xl font-bold text-carpet-gold mb-4">üîç Global Search</h2>
                
                <input type="text" id="searchInput" 
                       placeholder="Search: dragon, prayer, 1850-1920, chiprovtsi, natural dyes..." 
                       class="w-full p-4 text-base rounded-lg bg-carpet-dark border-2 border-carpet-light text-white mb-3"
                       onkeyup="performSearch()">
                
                <div class="text-xs md:text-sm text-gray-400 mb-4">
                    Examples: "dragon" ‚Ä¢ "prayer rug" ‚Ä¢ "chiprovtsi" ‚Ä¢ "pre-1900" ‚Ä¢ "shirvan" ‚Ä¢ "high value"
                </div>

                <!-- Search Results Navigation -->
                <div id="searchResultsNav" class="hidden sticky top-0 z-50 bg-gradient-to-r from-carpet-copper to-carpet-bronze p-3 md:p-4 rounded-lg mb-4 shadow-lg">
                    <div class="flex items-center justify-between mb-2">
                        <span id="searchResultCount" class="text-sm md:text-base font-bold">Found 0 results</span>
                        <div class="flex gap-2">
                            <button onclick="previousResult()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 md:px-4 py-1 md:py-2 rounded text-xs md:text-sm font-bold">
                                ‚Üê Prev
                            </button>
                            <span id="currentResultNum" class="px-3 md:px-4 py-1 md:py-2 bg-black bg-opacity-20 rounded text-xs md:text-sm font-bold">
                                1 of 1
                            </span>
                            <button onclick="nextResult()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 md:px-4 py-1 md:py-2 rounded text-xs md:text-sm font-bold">
                                Next ‚Üí
                            </button>
                        </div>
                    </div>
                    <div id="currentResultInfo" class="text-xs md:text-sm opacity-90"></div>
                </div>

                <!-- Search results container -->
                <div id="searchResults" class="space-y-4"></div>
            </div>
        </div>

        <!-- SYMBOLS TAB -->
        <div id="symbols" class="tab-content hidden">
            <div class="bg-carpet-medium p-4 md:p-6 rounded-xl shadow-xl">
                <h2 class="text-xl md:text-2xl font-bold text-carpet-gold mb-4">Symbol Encyclopedia</h2>
                
                <div class="flex flex-wrap gap-2 mb-4">
                    <button onclick="filterSymbols('all')" class="filter-btn active px-3 md:px-4 py-2 bg-carpet-light text-white rounded-lg text-xs md:text-sm">All</button>
                    <button onclick="filterSymbols('very-high')" class="filter-btn px-3 md:px-4 py-2 bg-carpet-light text-white rounded-lg text-xs md:text-sm">Very High $$$</button>
                    <button onclick="filterSymbols('high')" class="filter-btn px-3 md:px-4 py-2 bg-carpet-light text-white rounded-lg text-xs md:text-sm">High $$</button>
                </div>

                <div id="symbolsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
                    <!-- Symbols will be rendered here -->
                </div>
            </div>
        </div>

        <!-- REGIONS TAB -->
        <div id="regions" class="tab-content hidden">
            <div class="space-y-4">
                <div class="bg-carpet-medium p-4 md:p-6 rounded-xl">
                    <h2 class="text-xl md:text-2xl font-bold text-carpet-gold mb-4">Regional Guides</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
                        <button onclick="showRegion('armenia')" class="bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                            <div class="font-bold text-base md:text-lg mb-1">üá¶üá≤ Armenia</div>
                            <div class="text-xs md:text-sm opacity-80">Karabakh, Kazak, Dragons</div>
                        </button>
                        <button onclick="showRegion('azerbaijan')" class="bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                            <div class="font-bold text-base md:text-lg mb-1">üá¶üáø Azerbaijan</div>
                            <div class="text-xs md:text-sm opacity-80">Shirvan, Kuba, Prayer Rugs</div>
                        </button>
                        <button onclick="showRegion('georgia')" class="bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                            <div class="font-bold text-base md:text-lg mb-1">üá¨üá™ Georgia</div>
                            <div class="text-xs md:text-sm opacity-80">Karachov, Undervalued</div>
                        </button>
                        <button onclick="showRegion('albania')" class="bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                            <div class="font-bold text-base md:text-lg mb-1">üá¶üá± Albania</div>
                            <div class="text-xs md:text-sm opacity-80">Kilims, Emerging Market</div>
                        </button>
                        <button onclick="showRegion('bulgaria')" class="bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                            <div class="font-bold text-base md:text-lg mb-1">üáßüá¨ Bulgaria</div>
                            <div class="text-xs md:text-sm opacity-80">Chiprovtsi UNESCO</div>
                        </button>
                    </div>
                </div>
                <div id="regionDetail" class="bg-carpet-medium p-4 md:p-6 rounded-xl hidden"></div>
            </div>
        </div>

        <!-- DATING TAB -->
        <div id="dating" class="tab-content hidden">
            <div class="bg-carpet-medium p-4 md:p-6 rounded-xl">
                <h2 class="text-xl md:text-2xl font-bold text-carpet-gold mb-4">Authentication Tools</h2>
                <div class="space-y-4">
                    <button onclick="showAuthTool('checklist')" class="w-full bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                        <div class="font-bold text-base md:text-lg">üî¨ Authentication Checklist</div>
                        <div class="text-xs md:text-sm opacity-80">Point-based scoring system</div>
                    </button>
                    <button onclick="showAuthTool('age')" class="w-full bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                        <div class="font-bold text-base md:text-lg">üìÖ Age Estimator</div>
                        <div class="text-xs md:text-sm opacity-80">Date by dyes, foundation, design</div>
                    </button>
                    <button onclick="showAuthTool('redflags')" class="w-full bg-carpet-light hover:bg-carpet-copper p-4 rounded-lg text-left transition-all">
                        <div class="font-bold text-base md:text-lg">‚ö†Ô∏è Red Flags Guide</div>
                        <div class="text-xs md:text-sm opacity-80">Walk away indicators</div>
                    </button>
                </div>
                <div id="authToolContent" class="mt-4"></div>
            </div>
        </div>

    </div>

    <script>
        // PWA Installation
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.remove('hidden');
        });

        async function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                document.getElementById('installPrompt').classList.add('hidden');
            }
        }

        // Toggle Priority Buys Section
        function togglePriorityBuys() {
            const content = document.getElementById('priorityBuysContent');
            const toggle = document.getElementById('priorityToggle');
            
            if (content.style.display === 'none') {
                content.style.display = 'grid';
                toggle.textContent = '‚ñº Hide';
            } else {
                content.style.display = 'none';
                toggle.textContent = '‚ñ∂ Show';
            }
        }

        // Service Worker Registration with Update Detection
        const APP_VERSION = '1.2.0'; // UPDATE THIS NUMBER WHEN YOU MAKE CHANGES
        
        if ('serviceWorker' in navigator) {
            const sw = `
                const CACHE_NAME = 'carpet-expert-v${APP_VERSION}';
                const urlsToCache = ['./', 'index.html'];
                
                self.addEventListener('install', (event) => {
                    self.skipWaiting(); // Force new service worker to activate immediately
                    event.waitUntil(
                        caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache))
                    );
                });
                
                self.addEventListener('activate', (event) => {
                    event.waitUntil(
                        caches.keys().then(cacheNames => {
                            return Promise.all(
                                cacheNames.map(cacheName => {
                                    if (cacheName !== CACHE_NAME) {
                                        return caches.delete(cacheName); // Delete old caches
                                    }
                                })
                            );
                        })
                    );
                    return self.clients.claim(); // Take control immediately
                });
                
                self.addEventListener('fetch', (event) => {
                    event.respondWith(
                        fetch(event.request)
                            .then(response => {
                                const responseClone = response.clone();
                                caches.open(CACHE_NAME).then(cache => {
                                    cache.put(event.request, responseClone);
                                });
                                return response;
                            })
                            .catch(() => caches.match(event.request))
                    );
                });
            `;
            const blob = new Blob([sw], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);
            
            navigator.serviceWorker.register(swUrl).then(registration => {
                // Check for updates every time app is opened
                registration.update();
                
                // Listen for new service worker
                registration.addEventListener('updatefound', () => {
                    const newWorker = registration.installing;
                    newWorker.addEventListener('statechange', () => {
                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                            // New version available!
                            showUpdateNotification();
                        }
                    });
                });
            });
            
            // Refresh page when new service worker takes control
            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (!refreshing) {
                    refreshing = true;
                    window.location.reload();
                }
            });
        }
        
        function showUpdateNotification() {
            const updateBanner = document.createElement('div');
            updateBanner.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #d2691e 0%, #8b4513 100%);
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(0,0,0,0.4);
                z-index: 10000;
                text-align: center;
                max-width: 90%;
                animation: slideDown 0.3s ease;
            `;
            updateBanner.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 8px;">üéâ New Update Available!</div>
                <div style="font-size: 0.9em; margin-bottom: 12px;">Tap to refresh and get the latest features</div>
                <button onclick="window.location.reload()" style="background: white; color: #8b4513; border: none; padding: 8px 20px; border-radius: 6px; font-weight: bold; cursor: pointer;">
                    Update Now
                </button>
            `;
            document.body.appendChild(updateBanner);
        }

        // Manifest Generation with reliable icon
        const canvas = document.createElement('canvas');
        canvas.width = 512;
        canvas.height = 512;
        const ctx = canvas.getContext('2d');
        
        // Background gradient
        const bgGrad = ctx.createLinearGradient(0, 0, 512, 512);
        bgGrad.addColorStop(0, '#8b4513');
        bgGrad.addColorStop(1, '#d2691e');
        ctx.fillStyle = bgGrad;
        ctx.fillRect(0, 0, 512, 512);
        
        // Carpet base
        const carpetGrad = ctx.createLinearGradient(0, 120, 0, 460);
        carpetGrad.addColorStop(0, '#8b0000');
        carpetGrad.addColorStop(0.5, '#dc143c');
        carpetGrad.addColorStop(1, '#8b0000');
        ctx.fillStyle = carpetGrad;
        ctx.fillRect(100, 120, 312, 340);
        
        // Gold borders
        ctx.strokeStyle = '#ffd700';
        ctx.lineWidth = 4;
        ctx.strokeRect(115, 135, 282, 310);
        ctx.lineWidth = 2;
        ctx.strokeRect(125, 145, 262, 290);
        
        // Central medallion
        ctx.fillStyle = 'rgba(139, 69, 19, 0.7)';
        ctx.beginPath();
        ctx.arc(256, 290, 60, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = 'rgba(255, 215, 0, 0.8)';
        ctx.beginPath();
        ctx.arc(256, 290, 45, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = '#8b0000';
        ctx.beginPath();
        ctx.arc(256, 290, 30, 0, Math.PI * 2);
        ctx.fill();
        
        // Corner decorations
        ctx.fillStyle = 'rgba(255, 215, 0, 0.6)';
        [[160, 180], [352, 180], [160, 400], [352, 400]].forEach(([x, y]) => {
            ctx.beginPath();
            ctx.arc(x, y, 20, 0, Math.PI * 2);
            ctx.fill();
        });
        
        // Fringe
        ctx.strokeStyle = '#d2691e';
        ctx.lineWidth = 3;
        ctx.globalAlpha = 0.8;
        for(let x = 120; x < 392; x += 20) {
            ctx.beginPath();
            ctx.moveTo(x, 460);
            ctx.lineTo(x, x % 40 === 0 ? 485 : 480);
            ctx.stroke();
        }
        ctx.globalAlpha = 1;
        
        // Compass emoji
        ctx.font = 'bold 80px Arial, sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('üß≠', 256, 70);
        
        const iconDataUrl = canvas.toDataURL('image/png');
        
        const manifest = {
            name: "Carpet Expert",
            short_name: "Carpet Expert",
            description: "Field guide for identifying valuable Caucasian carpets",
            start_url: "./",
            display: "standalone",
            background_color: "#1a1a2e",
            theme_color: "#8b4513",
            orientation: "portrait",
            icons: [
                {
                    src: iconDataUrl,
                    sizes: "512x512",
                    type: "image/png",
                    purpose: "any maskable"
                },
                {
                    src: iconDataUrl,
                    sizes: "192x192",
                    type: "image/png"
                }
            ]
        };
        const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(manifestBlob);
        document.getElementById('manifest-placeholder').setAttribute('href', manifestURL);

        // Tab Management
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active', 'bg-gradient-to-r', 'from-carpet-bronze', 'to-carpet-copper'));
            
            document.getElementById(tabName).classList.remove('hidden');
            event.target.classList.add('active', 'bg-gradient-to-r', 'from-carpet-bronze', 'to-carpet-copper');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Search functionality
        let searchResults = [];
        let currentResultIndex = 0;

        function performSearch() {
            const term = document.getElementById('searchInput').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('searchResults');
            const navContainer = document.getElementById('searchResultsNav');
            
            // Clear previous results
            searchResults = [];
            currentResultIndex = 0;
            resultsContainer.innerHTML = '';
            
            if (!term) {
                navContainer.classList.add('hidden');
                return;
            }

            // Search data
            const searchData = getSearchableContent();
            searchResults = searchData.filter(item => 
                item.title.toLowerCase().includes(term) ||
                item.content.toLowerCase().includes(term) ||
                (item.keywords && item.keywords.toLowerCase().includes(term))
            );

            if (searchResults.length > 0) {
                navContainer.classList.remove('hidden');
                updateSearchNav();
                displayCurrentResult();
            } else {
                navContainer.classList.add('hidden');
                resultsContainer.innerHTML = `
                    <div class="bg-red-900 bg-opacity-50 p-4 rounded-lg text-center">
                        <p class="font-bold mb-2">No results found for "${term}"</p>
                        <p class="text-sm opacity-80">Try: dragon, prayer, chiprovtsi, 1850-1920, natural dyes</p>
                    </div>
                `;
            }
        }

        function updateSearchNav() {
            document.getElementById('searchResultCount').textContent = `Found ${searchResults.length} result${searchResults.length !== 1 ? 's' : ''}`;
            document.getElementById('currentResultNum').textContent = `${currentResultIndex + 1} of ${searchResults.length}`;
            
            const currentItem = searchResults[currentResultIndex];
            document.getElementById('currentResultInfo').textContent = `${currentItem.category} ‚Üí ${currentItem.title}`;
        }

        function displayCurrentResult() {
            const resultsContainer = document.getElementById('searchResults');
            const item = searchResults[currentResultIndex];
            
            resultsContainer.innerHTML = `
                <div class="bg-carpet-light p-4 md:p-6 rounded-xl border-4 border-carpet-gold slide-in">
                    <div class="text-carpet-gold text-xs md:text-sm font-bold mb-2">${item.category}</div>
                    <h3 class="text-lg md:text-2xl font-bold text-carpet-gold mb-3">${item.title}</h3>
                    <div class="prose prose-invert max-w-none text-sm md:text-base">${item.content}</div>
                    ${item.value ? `<div class="mt-4 bg-gradient-to-r from-yellow-600 to-yellow-500 text-black px-4 py-2 rounded-lg inline-block font-bold text-sm md:text-base">${item.value}</div>` : ''}
                </div>
            `;
            
            resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function nextResult() {
            if (currentResultIndex < searchResults.length - 1) {
                currentResultIndex++;
                updateSearchNav();
                displayCurrentResult();
            }
        }

        function previousResult() {
            if (currentResultIndex > 0) {
                currentResultIndex--;
                updateSearchNav();
                displayCurrentResult();
            }
        }

        // Fragment Identification
        function identifyFragment() {
            const region = document.getElementById('region').value;
            const colors = document.getElementById('colors').value;
            const knotDensity = document.getElementById('knotDensity').value;
            const symbols = document.getElementById('symbols').value.toLowerCase();
            const technique = document.getElementById('technique').value;
            
            const resultBox = document.getElementById('resultBox');
            
            if (!region || !colors || !knotDensity || !technique) {
                resultBox.innerHTML = '<p class="text-red-400 font-bold">Please fill in all required fields.</p>';
                resultBox.classList.remove('hidden');
                return;
            }
            
            let confidence = 0;
            let valueEstimate = 'Unable to determine';
            let recommendation = '';
            
            // Armenian analysis
            if (region === 'armenia') {
                if (symbols.includes('dragon') || symbols.includes('vishap')) {
                    confidence += 35;
                    valueEstimate = 'Very High ($8,000-$50,000+)';
                    recommendation = 'üéØ PRIORITY BUY - Armenian dragon motifs are museum-quality';
                }
                if (symbols.includes('cross')) confidence += 25;
                if (colors === 'red-blue' && knotDensity === 'medium') confidence += 20;
            }
            
            // Azerbaijan analysis
            if (region === 'azerbaijan') {
                if (symbols.includes('prayer') || symbols.includes('mihrab')) {
                    confidence += 40;
                    valueEstimate = 'Very High ($8,000-$40,000+)';
                    recommendation = 'üéØ PRIORITY BUY - Azerbaijani prayer rugs are highly collectible';
                }
                if (knotDensity === 'very-high' || knotDensity === 'high') {
                    confidence += 25;
                    valueEstimate = 'Very High ($10,000-$60,000)';
                }
            }
            
            // Bulgaria analysis
            if (region === 'bulgaria' && technique === 'kilim') {
                if (symbols.includes('rose') || symbols.includes('chiprovtsi')) {
                    confidence += 45;
                    valueEstimate = 'Very High ($3,000-$40,000)';
                    recommendation = 'üéØ PRIORITY BUY - Check if reversible (identical both sides)!';
                }
            }
            
            resultBox.innerHTML = `
                <h3 class="text-xl md:text-2xl font-bold text-carpet-gold mb-4">Analysis Results</h3>
                <div class="space-y-3">
                    <div class="bg-carpet-dark p-4 rounded-lg">
                        <div class="text-sm md:text-base mb-1">Confidence Level:</div>
                        <div class="text-xl md:text-3xl font-bold text-carpet-gold">${Math.min(confidence, 95)}%</div>
                    </div>
                    <div class="bg-carpet-dark p-4 rounded-lg">
                        <div class="text-sm md:text-base mb-1">Estimated Value:</div>
                        <div class="text-lg md:text-2xl font-bold text-green-400">${valueEstimate}</div>
                    </div>
                    ${recommendation ? `<div class="bg-green-700 bg-opacity-50 p-4 rounded-lg border-2 border-green-500"><div class="font-bold text-base md:text-lg">${recommendation}</div></div>` : ''}
                    <div class="bg-carpet-dark p-4 rounded-lg">
                        <div class="font-bold mb-2 text-sm md:text-base">Next Steps:</div>
                        <ul class="list-disc list-inside space-y-1 text-xs md:text-sm">
                            <li>Photograph front and back in natural light</li>
                            <li>Count knots per square inch</li>
                            <li>Check for woven dates/inscriptions</li>
                            <li>Smell test for synthetic materials</li>
                            <li>Document seller provenance</li>
                        </ul>
                    </div>
                </div>
            `;
            
            resultBox.classList.remove('hidden');
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Symbol filtering
        function filterSymbols(level) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-carpet-bronze');
            });
            event.target.classList.add('active', 'bg-carpet-bronze');
            
            renderSymbols(level);
        }

        function renderSymbols(filter = 'all') {
            const symbols = getSymbolData();
            const filtered = filter === 'all' ? symbols : symbols.filter(s => s.value === filter);
            
            const grid = document.getElementById('symbolsGrid');
            grid.innerHTML = filtered.map(s => `
                <div class="bg-carpet-light p-4 rounded-lg border-l-4 border-carpet-bronze">
                    <div class="text-lg md:text-xl font-bold mb-2">${s.icon} ${s.name}</div>
                    <div class="text-xs md:text-sm mb-2"><strong>Meaning:</strong> ${s.meaning}</div>
                    <div class="text-xs md:text-sm mb-2">${s.info}</div>
                    <div class="bg-gradient-to-r from-yellow-600 to-yellow-500 text-black px-3 py-1 rounded inline-block text-xs md:text-sm font-bold mt-2">
                        ${s.valueLabel}
                    </div>
                </div>
            `).join('');
        }

        // Region details
        function showRegion(region) {
            const detail = document.getElementById('regionDetail');
            const data = getRegionData(region);
            
            detail.innerHTML = `
                <h3 class="text-xl md:text-2xl font-bold text-carpet-gold mb-4">${data.name}</h3>
                <div class="space-y-4 text-sm md:text-base">
                    <div><strong>Peak Period:</strong> ${data.period}</div>
                    <div><strong>Key Types:</strong> ${data.types}</div>
                    <div><strong>Value Range:</strong> ${data.value}</div>
                    <div class="bg-carpet-dark p-4 rounded-lg">
                        <div class="font-bold mb-2">What to Look For:</div>
                        <ul class="list-disc list-inside space-y-1">
                            ${data.lookFor.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    ${data.tip ? `<div class="bg-green-700 bg-opacity-30 p-4 rounded-lg border-2 border-green-500"><strong>üí° Field Tip:</strong> ${data.tip}</div>` : ''}
                </div>
            `;
            
            detail.classList.remove('hidden');
            detail.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Authentication tools
        function showAuthTool(tool) {
            const content = document.getElementById('authToolContent');
            
            if (tool === 'checklist') {
                content.innerHTML = `
                    <div class="bg-carpet-dark p-4 md:p-6 rounded-xl mt-4">
                        <h3 class="text-lg md:text-xl font-bold mb-4">Authentication Checklist</h3>
                        <div class="space-y-3">
                            <label class="flex items-start gap-3 bg-carpet-light p-3 rounded-lg cursor-pointer hover:bg-opacity-80">
                                <input type="checkbox" class="mt-1" data-points="10">
                                <span class="text-sm md:text-base">Musty, earthy wool smell (not chemical)</span>
                            </label>
                            <label class="flex items-start gap-3 bg-carpet-light p-3 rounded-lg cursor-pointer hover:bg-opacity-80">
                                <input type="checkbox" class="mt-1" data-points="15">
                                <span class="text-sm md:text-base">Horizontal color banding (abrash) visible</span>
                            </label>
                            <label class="flex items-start gap-3 bg-carpet-light p-3 rounded-lg cursor-pointer hover:bg-opacity-80">
                                <input type="checkbox" class="mt-1" data-points="15">
                                <span class="text-sm md:text-base">Pattern clearly visible on reverse side</span>
                            </label>
                            <label class="flex items-start gap-3 bg-carpet-light p-3 rounded-lg cursor-pointer hover:bg-opacity-80">
                                <input type="checkbox" class="mt-1" data-points="20">
                                <span class="text-sm md:text-base">Irregular knot sizes (hand-tied)</span>
                            </label>
                            <label class="flex items-start gap-3 bg-carpet-light p-3 rounded-lg cursor-pointer hover:bg-opacity-80">
                                <input type="checkbox" class="mt-1" data-points="25">
                                <span class="text-sm md:text-base">Wool warp and weft (pre-1900)</span>
                            </label>
                            <label class="flex items-start gap-3 bg-red-900 bg-opacity-50 p-3 rounded-lg cursor-pointer hover:bg-opacity-60">
                                <input type="checkbox" class="mt-1" data-points="-30">
                                <span class="text-sm md:text-base">‚ùå Bright neon colors (synthetic dyes)</span>
                            </label>
                            <label class="flex items-start gap-3 bg-red-900 bg-opacity-50 p-3 rounded-lg cursor-pointer hover:bg-opacity-60">
                                <input type="checkbox" class="mt-1" data-points="-25">
                                <span class="text-sm md:text-base">‚ùå Perfectly uniform knots (machine-made)</span>
                            </label>
                        </div>
                        <button onclick="calculateAuth()" class="w-full mt-4 bg-gradient-to-r from-carpet-bronze to-carpet-copper text-white py-3 md:py-4 rounded-lg font-bold text-sm md:text-base">
                            Calculate Score
                        </button>
                        <div id="authScore" class="mt-4"></div>
                    </div>
                `;
            } else if (tool === 'age') {
                content.innerHTML = `
                    <div class="bg-carpet-dark p-4 md:p-6 rounded-xl mt-4">
                        <h3 class="text-lg md:text-xl font-bold mb-4">Age Estimation</h3>
                        <div class="space-y-4 text-sm md:text-base">
                            <div class="bg-carpet-light p-4 rounded-lg">
                                <div class="font-bold mb-2">üé® By Dye Technology:</div>
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Pre-1860: ALL natural dyes</li>
                                    <li>1860-1900: Mix natural + synthetic</li>
                                    <li>1900-1920: Predominantly synthetic</li>
                                    <li>Post-1920: All synthetic (low value)</li>
                                    <li>Post-1980: Natural dye revival (reproductions!)</li>
                                </ul>
                            </div>
                            <div class="bg-carpet-light p-4 rounded-lg">
                                <div class="font-bold mb-2">üßµ By Foundation:</div>
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Wool warp + weft = Pre-1900</li>
                                    <li>Cotton warp, wool weft = 1900-1930</li>
                                    <li>Cotton warp + weft = Post-1960</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            } else if (tool === 'redflags') {
                content.innerHTML = `
                    <div class="bg-carpet-dark p-4 md:p-6 rounded-xl mt-4">
                        <h3 class="text-lg md:text-xl font-bold mb-4 text-red-400">üö´ Red Flags - Walk Away</h3>
                        <div class="space-y-2 text-sm md:text-base">
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå Chemical smell when sniffing</div>
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå Neon colors (orange, purple, lime)</div>
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå Machine-perfect knots</div>
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå New fringe on worn pile</div>
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå Pakistan/Afghanistan label</div>
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå Too perfect for claimed age</div>
                            <div class="bg-red-900 bg-opacity-50 p-3 rounded-lg">‚ùå Price suspiciously low</div>
                        </div>
                    </div>
                `;
            }
        }

        function calculateAuth() {
            const checkboxes = document.querySelectorAll('#authToolContent input[type="checkbox"]:checked');
            let score = 0;
            checkboxes.forEach(cb => score += parseInt(cb.getAttribute('data-points')));
            
            const normalized = Math.max(0, Math.min(100, ((score + 50) / 135) * 100));
            const scoreDiv = document.getElementById('authScore');
            
            let verdict = '';
            let color = '';
            
            if (normalized >= 75) {
                verdict = '‚úÖ STRONG AUTHENTICATION - Proceed with confidence';
                color = 'bg-green-700';
            } else if (normalized >= 50) {
                verdict = '‚ö†Ô∏è MODERATE - Investigate further before buying';
                color = 'bg-yellow-700';
            } else {
                verdict = '‚ùå LOW CONFIDENCE - Walk away';
                color = 'bg-red-700';
            }
            
            scoreDiv.innerHTML = `
                <div class="${color} bg-opacity-70 p-4 rounded-lg border-2 border-current">
                    <div class="text-2xl md:text-4xl font-bold mb-2">${normalized.toFixed(0)}%</div>
                    <div class="font-bold text-sm md:text-base">${verdict}</div>
                </div>
            `;
        }

        // Data functions
        function getSearchableContent() {
            return [
                {
                    category: "Armenia",
                    title: "Armenian Dragon (Vishap)",
                    content: "S-curved dragon motifs are distinctly Armenian, especially in Karabakh pieces. Look for hooked tongues and scale patterns. These are museum-quality finds. Paired combat dragons indicate pre-1850 work.",
                    value: "$8,000-$80,000+",
                    keywords: "dragon vishap armenia karabakh s-curve scales high-value combat pre-1850"
                },
                {
                    category: "Azerbaijan",
                    title: "Shirvan Prayer Rugs",
                    content: "Prayer rugs (namazlyk) with distinctive mihrab arch. Tightly woven (100-180 KPSI) with dark blue or black fields. Often feature lamp or hands motifs.",
                    value: "$5,000-$40,000",
                    keywords: "shirvan prayer mihrab azerbaijani niche arch high-value namazlyk lamp hands"
                },
                {
                    category: "Bulgaria",
                    title: "Chiprovtsi Reversible Kilims",
                    content: "UNESCO heritage textiles. CRITICAL TEST: Pattern must be identical on both sides. Diagonal ribbing on surface from oblique weaving. Natural dyes only.",
                    value: "$2,000-$40,000",
                    keywords: "chiprovtsi bulgaria reversible unesco kilim rose very-high-value diagonal ribs"
                },
                {
                    category: "Azerbaijan",
                    title: "Kuba Fine Weaving",
                    content: "Finest weaving in Caucasus at 150-250 KPSI. Chi-Chi subtype with diagonal lattice is premium. Museum-quality pieces.",
                    value: "$10,000-$60,000",
                    keywords: "kuba chi-chi azerbaijan fine-weave very-high-knot museum lattice"
                },
                {
                    category: "Armenia",
                    title: "Karabakh Carpets",
                    content: "Large-scale floral motifs, especially roses and nightingales. Deep indigo backgrounds with rich reds. Famous for Eagle Kazak and Cloudband designs.",
                    value: "$15,000-$80,000+",
                    keywords: "karabakh armenia eagle kazak cloudband roses nightingale high-value indigo"
                },
                {
                    category: "Dating",
                    title: "Pre-1900 Indicators",
                    content: "Wool warp AND weft threads, natural dyes only (madder, indigo, walnut), irregular knots, abrash color banding. Chemical smell = walk away.",
                    value: "Authentication Key",
                    keywords: "pre-1900 19th-century natural-dyes wool authentication dating abrash madder indigo"
                },
                {
                    category: "Albania",
                    title: "Albanian Kilims",
                    content: "Flat-weave with bold geometric designs. Traditionally made for dowries. Currently undervalued - emerging market opportunity.",
                    value: "$300-$10,000",
                    keywords: "albania kilim flat-weave emerging undervalued geometric dowry"
                },
                {
                    category: "Symbols",
                    title: "Boteh (Paisley)",
                    content: "Teardrop flame motif from Zoroastrianism. Rows of boteh indicate Azerbaijani origin, particularly Shirvan or Baku region.",
                    value: "Medium Value",
                    keywords: "boteh buta paisley azerbaijan shirvan flame zoroastrian baku"
                },
                {
                    category: "Symbols - Birds",
                    title: "Eagle (Artsiv) - Armenian National Symbol",
                    content: "Double-headed eagle represents Armenian royalty and national identity. Single eagle = power and protection. 'Eagle Kazak' carpets are highly valuable. Look for spread wings or perched forms with detailed feather work.",
                    value: "$8,000-$50,000+",
                    keywords: "eagle artsiv bird armenian double-headed national kazak wings feathers royalty power"
                },
                {
                    category: "Symbols - Birds",
                    title: "Peacock (Taous) - Immortality Symbol",
                    content: "Peacock with spread tail represents immortality and paradise. Armenian Christian symbol of resurrection. Also sacred in Yezidi religion. Look for distinctive eye patterns in tail feathers. High value indicator.",
                    value: "$5,000-$40,000",
                    keywords: "peacock taous bird armenian yezidi immortality paradise resurrection tail eyes feathers"
                },
                {
                    category: "Symbols - Birds",
                    title: "Nightingale (Sokhak) - Love & Romance",
                    content: "Small bird paired with roses in Karabakh carpets. Symbol of pure love and soul's yearning. Common in Armenian poetry. Often in garden scenes with flowering branches.",
                    value: "$10,000-$60,000",
                    keywords: "nightingale sokhak bird armenian karabakh rose love romance garden poetry soul"
                },
                {
                    category: "Symbols - Birds",
                    title: "Rooster (Horoz) - Vigilance & Protection",
                    content: "Common in village carpets. Rooster wards off evil spirits at dawn. Symbol of vigilance and reproductive fertility. Often depicted with elaborate tail feathers.",
                    value: "$2,000-$15,000",
                    keywords: "rooster horoz bird cock chicken village protection evil dawn fertility tail"
                },
                {
                    category: "Symbols - Birds",
                    title: "Dove (Aghavni) - Holy Spirit & Peace",
                    content: "Christian symbol of Holy Spirit and peace. Often holds olive branch. Paired doves = marital harmony. Around cross motifs = Trinity representation.",
                    value: "$5,000-$30,000",
                    keywords: "dove aghavni bird armenian christian holy-spirit peace olive-branch harmony trinity"
                },
                {
                    category: "Symbols - Birds",
                    title: "Falcon/Hawk - Noble Hunting Bird",
                    content: "Symbol of nobility, hunting prowess, and keen sight. Royal hunt scenes. Swift justice representation. Sharp vision = wisdom.",
                    value: "$3,000-$20,000",
                    keywords: "falcon hawk bird hunting noble vision wisdom royal swift predator"
                },
                {
                    category: "Symbols - Birds",
                    title: "Owl - Wisdom & Mystery",
                    content: "Nocturnal knowledge symbol. Athena's bird. Night guardian. Sometimes ill omen in folklore. Rare but meaningful when present.",
                    value: "$2,000-$12,000",
                    keywords: "owl bird wisdom night nocturnal athena mystery knowledge guardian"
                },
                {
                    category: "Symbols - Birds",
                    title: "Swan - Grace & Fidelity",
                    content: "Paired swans represent eternal love and fidelity. White = purity. Transformation symbol. Lake and pond scenes. Armenian and Persian carpets.",
                    value: "$4,000-$25,000",
                    keywords: "swan bird grace purity love fidelity transformation lake white armenian persian"
                },
                {
                    category: "Symbols - Birds",
                    title: "Duck - Adaptation & Harmony",
                    content: "Three element symbolism (water-earth-air). Domestic bird. Paired ducks = marital harmony. Water birds in general.",
                    value: "$2,000-$10,000",
                    keywords: "duck bird water adaptation harmony domestic paired elements"
                },
                {
                    category: "Symbols - Birds",
                    title: "Parrot - Exotic Trade & Speech",
                    content: "Indicates trade connections and exotic luxury. Speech and prophecy symbol. Bright colors = joy. Persian-influenced carpets.",
                    value: "$3,000-$18,000",
                    keywords: "parrot bird exotic trade speech colorful persian luxury prophecy"
                },
                {
                    category: "Symbols - Animals",
                    title: "Lion (Lev/Arslan) - Royal Power",
                    content: "Symbol of royal power, courage, and sun. Persian influence. Lion-sun motif common. Paired with lamb = peace. Fighting stance = valor.",
                    value: "$5,000-$35,000",
                    keywords: "lion lev arslan animal persian royal courage sun lamb valor power"
                },
                {
                    category: "Symbols - Animals",
                    title: "Deer/Stag (Eljen) - Grace & Spirituality",
                    content: "Antlered stag = masculine power. Doe = feminine grace. Paired = harmony. Common in hunting scenes. Spiritual aspiration symbol.",
                    value: "$4,000-$25,000",
                    keywords: "deer stag eljen animal antlers hunting grace spiritual harmony doe"
                },
                {
                    category: "Symbols - Animals",
                    title: "Horse (Dzi) - Nobility & Freedom",
                    content: "Rider indicates nobility. Rearing horse = power. Pastoral scenes common. Tribal prestige symbol. Warrior status.",
                    value: "$3,000-$20,000",
                    keywords: "horse dzi animal nobility freedom warrior rider pastoral tribal power"
                },
                {
                    category: "Symbols - Animals",
                    title: "Camel - Trade & Endurance",
                    content: "Silk Road symbol. Merchant wealth indicator. Single hump (dromedary) vs two-hump (Bactrian). Caravan scenes. Desert endurance.",
                    value: "$2,000-$15,000",
                    keywords: "camel animal trade silk-road merchant caravan desert endurance dromedary bactrian"
                },
                {
                    category: "Symbols - Animals",
                    title: "Ram - Fertility & Sacrifice",
                    content: "Ram's horn (Ko√ß Boynuzu) = S-curve spiral at corners. Male power, fertility, sacrifice (Ibrahim/Abraham). Aries zodiac. Tribal strength.",
                    value: "$3,000-$18,000",
                    keywords: "ram sheep horn animal spiral fertility sacrifice ibrahim abraham zodiac tribal"
                },
                {
                    category: "Symbols - Animals",
                    title: "Dog - Loyalty & Protection",
                    content: "Rare in main field. Running Dog border pattern common. Guardian of flocks and home. Shepherd companion. Fidelity symbol.",
                    value: "$2,000-$12,000",
                    keywords: "dog animal loyalty protection guardian shepherd fidelity running-dog border"
                },
                {
                    category: "Symbols - Animals",
                    title: "Goat - Mountain Resilience",
                    content: "Mountain goat in Caucasus. Sure-footed = overcoming obstacles. Horns = virility. Independence and climbing.",
                    value: "$2,000-$10,000",
                    keywords: "goat animal mountain caucasus resilience horns obstacles independence climbing"
                },
                {
                    category: "Symbols - Animals",
                    title: "Bear (Arj) - Armenian National Animal",
                    content: "Bear = Arj in Armenian, related to Armenia name. Symbol of strength and courage. Protective power. Rare but significant when present.",
                    value: "$5,000-$30,000",
                    keywords: "bear arj animal armenian national strength courage protection rare"
                },
                {
                    category: "Symbols - Animals",
                    title: "Fox - Cunning & Wisdom",
                    content: "Folklore trickster symbol. Clever survivor. Adaptation. Less common than other animals. Reynard tales influence.",
                    value: "$2,000-$12,000",
                    keywords: "fox animal cunning wisdom trickster folklore adaptation clever survivor"
                },
                {
                    category: "Symbols - Animals",
                    title: "Fish (Dzuk) - Abundance & Christianity",
                    content: "Paired fish = fertility. Christian ichthys symbol. Water and life connection. Armenian church symbolism. Abundance.",
                    value: "$3,000-$18,000",
                    keywords: "fish dzuk animal water christian fertility abundance ichthys armenian church"
                },
                {
                    category: "Symbols - Animals",
                    title: "Scorpion (Karich) - Protection",
                    content: "Apotropaic symbol - protects by threatening evil. Zodiac sign. Desert regions. Prominent tail sting. Danger and survival.",
                    value: "$2,000-$10,000",
                    keywords: "scorpion karich animal protection zodiac desert danger tail sting apotropaic"
                },
                {
                    category: "Symbols - Animals",
                    title: "Butterfly (Titer) - Soul & Resurrection",
                    content: "Christian resurrection symbol. Paired with flowers. Symmetrical wing patterns. Transformation. Life cycle = human mortality.",
                    value: "$3,000-$15,000",
                    keywords: "butterfly titer animal insect soul resurrection transformation christian mortality wings"
                },
                {
                    category: "Symbols - Animals",
                    title: "Bee (Meghu) - Industry & Community",
                    content: "Hive = organized society. Honey = prosperity. Worker ethic. Divine organization. Rare but meaningful.",
                    value: "$3,000-$15,000",
                    keywords: "bee meghu animal insect industry community hive honey prosperity organization"
                },
                {
                    category: "Symbols - Animals",
                    title: "Spider (Sard) - Weaving & Fate",
                    content: "Master weaver (carpet metaphor!). Web of fate. Patience creates beauty. Feminine creation power. Philosophical symbol.",
                    value: "$2,000-$12,000",
                    keywords: "spider sard animal insect weaving fate web patience creation philosophical"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Rose (Vard) - Armenian Love Symbol",
                    content: "Red rose = passion. White = purity. Karabakh famous for rose carpets. 'Gul' means rose. Persian garden tradition. Central to Armenian identity.",
                    value: "$8,000-$50,000",
                    keywords: "rose vard flower armenian karabakh love passion purity gul garden persian"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Pomegranate (Nur) - Fertility Symbol",
                    content: "Many seeds = fertility. Unity in diversity. Armenian national symbol. Paradise fruit. Often shown opened revealing seeds.",
                    value: "$5,000-$35,000",
                    keywords: "pomegranate nur fruit armenian fertility seeds unity paradise national-symbol"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Grape Vine (Khaghagh) - Georgian Wine Culture",
                    content: "Georgian signature motif (ancient wine culture). Christian eucharist. Leaves and grape clusters. Harvest bounty and abundance.",
                    value: "$4,000-$25,000",
                    keywords: "grape vine khaghagh georgian wine christian eucharist harvest abundance leaves clusters"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Tulip (Lale) - Ottoman Luxury",
                    content: "Ottoman signature flower from 'Tulip Era' Turkey. Simple 3-petal form. Perfect love symbol. Persian origin. Paradise garden flower.",
                    value: "$3,000-$18,000",
                    keywords: "tulip lale flower ottoman turkish persian love paradise garden three-petal"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Lotus - Purity & Enlightenment",
                    content: "Buddhist/Hindu symbol via Silk Road. Sacred flower. Rises pure from muddy water = spiritual transcendence and rebirth.",
                    value: "$4,000-$22,000",
                    keywords: "lotus flower buddhist hindu silk-road purity enlightenment rebirth transcendence sacred"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Carnation (Mekhak) - Divine Love",
                    content: "Christian passion flower. Ruffled petals distinctive. Pink and red common colors. Mother's love. Ottoman favorite.",
                    value: "$2,000-$12,000",
                    keywords: "carnation mekhak flower christian passion love mother ottoman ruffled petals"
                },
                {
                    category: "Symbols - Flowers",
                    title: "Cypress Tree (Sarv) - Eternity",
                    content: "Evergreen = eternal life. Cemetery tree = death/mourning. Flame-like shape. Persian gardens. Zoroastrian sacred tree.",
                    value: "$3,000-$18,000",
                    keywords: "cypress sarv tree evergreen eternity death mourning persian zoroastrian sacred flame"
                }
            ];
        }

        function getSymbolData() {
            return [
                // VERY HIGH VALUE SYMBOLS
                { icon: "üêâ", name: "Dragon (Vishap/Ejder)", meaning: "Power, protection, water source guardian", info: "S-curved Armenian dragons are museum-quality. Look for paired combat dragons, scale patterns, hooked tongues. Karabakh specialty. Pre-1850 indicator.", value: "very-high", valueLabel: "VERY HIGH VALUE", regions: "Armenian, Azerbaijani" },
                { icon: "üïå", name: "Prayer Niche (Mihrab)", meaning: "Direction to Mecca, portal to divine", info: "Prayer rugs always premium. Look for pointed arch, lamp above (kandil), hands below. Shirvan, Kuba masters.", value: "very-high", valueLabel: "VERY HIGH VALUE", regions: "Azerbaijani, Turkish" },
                { icon: "ü¶Ö", name: "Eagle (Artsiv)", meaning: "Divine messenger, Armenian national symbol, freedom", info: "Double-headed eagle = Armenian royalty. Single eagle = power, protection. 'Eagle Kazak' carpets highly valuable. Spread wings or perched.", value: "very-high", valueLabel: "VERY HIGH VALUE", regions: "Armenian, Caucasian" },
                { icon: "üåπ", name: "Chiprovtsi Rose", meaning: "Beauty, Bulgarian heritage, UNESCO symbol", info: "Unique to Chiprovtsi kilims. Stylized 8-petaled flower, diagonal stems. REVERSIBILITY TEST CRITICAL.", value: "very-high", valueLabel: "VERY HIGH VALUE", regions: "Bulgarian" },
                { icon: "üêç", name: "Serpent/Water Dragon", meaning: "Water guardian, wisdom, transformation, fertility", info: "Sinuous S-curves, often paired in combat. Armenian specialty. Different from Chinese dragons - more abstract, geometric.", value: "very-high", valueLabel: "VERY HIGH VALUE", regions: "Armenian, Caucasian" },
                
                // HIGH VALUE SYMBOLS
                { icon: "‚úùÔ∏è", name: "Cross Patterns (Khach/Khachkar)", meaning: "Christian faith, four cardinal directions, sacred center", info: "Armenian crosses have elaborate floral terminals. Georgian Bolnisi cross = unique stepped form. Indicates Christian weaver = Armenian/Georgian origin.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Georgian, Bulgarian" },
                { icon: "ü¶ö", name: "Peacock (Taous)", meaning: "Immortality, paradise, Yezidi sacred symbol", info: "Spread tail = full glory. Armenian Christian symbol of resurrection. Also Yezidi religious significance. Look for eye patterns in tail.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Kurdish" },
                { icon: "üê¶", name: "Nightingale (Sokhak)", meaning: "Love, spring, soul's yearning, romance", info: "Small bird paired with roses in Karabakh carpets. Symbol of pure love. Often in garden scenes. Armenian poetry symbol.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Persian" },
                { icon: "üêì", name: "Rooster (Horoz)", meaning: "Vigilance, dawn, protection from evil", info: "Common in village carpets. Wards off evil spirits. Reproductive fertility symbol. Often with elaborate tail feathers.", value: "high", valueLabel: "HIGH VALUE", regions: "Caucasian, Turkish" },
                { icon: "ü¶å", name: "Deer/Stag (‘µ’≤’ª’•÷Ä’∏÷Ç/Eljen)", meaning: "Grace, gentleness, spiritual aspiration", info: "Antlered stag = masculine power. Doe = feminine grace. Paired = harmony. Common in hunting scenes.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Persian" },
                { icon: "ü¶Å", name: "Lion (Lev/Arslan)", meaning: "Royal power, courage, sun symbol", info: "Persian influence. Lion-sun motif common. Paired with lamb = peace. Fighting stance = valor.", value: "high", valueLabel: "HIGH VALUE", regions: "Persian, Caucasian" },
                { icon: "üå≥", name: "Tree of Life (Hayat Aƒüacƒ±)", meaning: "Immortality, connection earth-heaven, cosmic axis", info: "Cypress (narrow) = death/mourning. Pomegranate tree = fertility. Plane tree = wisdom. Birds in branches add value.", value: "high", valueLabel: "HIGH VALUE", regions: "All regions" },
                { icon: "üåô", name: "Cloudband (Chi)", meaning: "Buddhist cloud, good fortune, Chinese origin", info: "Chi-shaped curves in borders. Pre-1850 Karabakh indicator. Shows Silk Road trade influence. Paired with dragons.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Azerbaijani" },
                { icon: "üí†", name: "Memling Gul", meaning: "Medieval Christian symbol from paintings", info: "Octagonal medallion with cruciform center. Named after 15th c. painter. Indicates quality Shirvan/Kuba work.", value: "high", valueLabel: "HIGH VALUE", regions: "Azerbaijani" },
                { icon: "üåø", name: "Palmette (Shah Abbas)", meaning: "Lotus flower, rebirth, Persian luxury", info: "Multi-lobed floral form. Persian influence indicator. In borders or field. Safavid dynasty symbol.", value: "high", valueLabel: "HIGH VALUE", regions: "Persian-influenced Caucasian" },
                { icon: "üè∫", name: "Elibelinde (Hands on Hips)", meaning: "Mother goddess, fertility, female power, protection", info: "Diamond with protruding triangular 'arms'. Ancient Anatolian fertility goddess. Common in tribal work.", value: "high", valueLabel: "HIGH VALUE", regions: "Turkish, Caucasian" },
                { icon: "ü¶ã", name: "Butterfly (‘π’´’©’•’º/Titer)", meaning: "Soul, transformation, resurrection, spring", info: "Christian resurrection symbol. Paired with flowers. Symmetrical wing patterns. Short lifecycle = human mortality.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Persian" },
                { icon: "üïäÔ∏è", name: "Dove (‘±’≤’°’æ’∂’´/Aghavni)", meaning: "Holy Spirit, peace, purity, messenger", info: "Christian symbol. Often holds olive branch. Paired = marital harmony. Around cross = Trinity.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Georgian" },
                { icon: "üêé", name: "Horse (’Å’´/Dzi)", meaning: "Nobility, freedom, warrior status, speed", info: "Rider indicates nobility. Rearing = power. Pastoral scenes common. Tribal prestige symbol.", value: "high", valueLabel: "HIGH VALUE", regions: "Caucasian, Turkish" },
                { icon: "üê™", name: "Camel (’à÷Ç’≤’ø/Ught)", meaning: "Endurance, desert journey, trade, wealth", info: "Silk Road symbol. Merchant wealth. Single hump (dromedary) vs two-hump (Bactrian). Caravan scenes.", value: "high", valueLabel: "HIGH VALUE", regions: "Azerbaijani, Turkmen" },
                
                // MEDIUM-HIGH VALUE SYMBOLS
                { icon: "üî∑", name: "Boteh (Buta/Paisley)", meaning: "Zoroastrian flame, cypress, life force", info: "Teardrop/flame shape. Rows indicate Azerbaijani (Shirvan/Baku). Single = Persian. Fire worship symbol.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Azerbaijani, Persian" },
                { icon: "‚≠ê", name: "Eight-Pointed Star (G√∂l)", meaning: "Celestial guidance, pre-Islamic sun, infinity", info: "Caucasian stars more angular than Persian. Eight points = cosmic order. Turkmen tribal guls.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian, Turkmen" },
                { icon: "‚ú°Ô∏è", name: "Six-Pointed Star (Solomon's Seal)", meaning: "Divine protection, harmony opposites, Jewish/Muslim", info: "Two overlapping triangles. ‚ñ≤ (fire/male) + ‚ñº (water/female) = balance. Apotropaic (evil protection).", value: "medium", valueLabel: "MEDIUM VALUE", regions: "All regions" },
                { icon: "üåü", name: "Five-Pointed Star", meaning: "Human form, five senses, Islamic symbol", info: "Arms-legs-head representation. Five pillars of Islam. Less common than 8-point in Caucasian work.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Islamic regions" },
                { icon: "üêè", name: "Ram's Horn (Ko√ß Boynuzu)", meaning: "Male power, fertility, sacrifice, protection", info: "S-curve spiral at medallion corners. Aries zodiac. Sacrifice symbol (Ibrahim/Abraham). Tribal strength.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian, Turkish" },
                { icon: "üê∫", name: "Running Dog Border (Kurt ƒ∞zi)", meaning: "Protection, loyalty, guardian spirit, path", info: "Reciprocal Z-pattern creating chain. 'Dog's track'. Common Shirvan border. Continuous protection line.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Azerbaijani" },
                { icon: "üêï", name: "Dog (’á’∏÷Ç’∂/Shun)", meaning: "Loyalty, protection, fidelity, shepherd companion", info: "Rare in main field. More common in border as 'running dog'. Guardian of flocks and home.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian" },
                { icon: "üêë", name: "Sheep (’à’π’≠’°÷Ä/Vochkhar)", meaning: "Wealth, pastoral life, sacrifice, abundance", info: "Flock = wealth indicator. Shepherd scenes. Wool source symbol. Rural life depiction.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian, Anatolian" },
                { icon: "üêê", name: "Goat (‘±’µ’Æ/Ayts)", meaning: "Mountain resilience, independence, climbing", info: "Mountain goat in Caucasus. Sure-footed = overcoming obstacles. Horns = virility.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian, Kurdish" },
                { icon: "ü¶ä", name: "Fox (‘±’≤’∏÷Ç’•’Ω/Aghves)", meaning: "Cunning, wisdom, adaptation, trickster", info: "Folklore symbol. Clever survivor. Less common than other animals. Reynard tales influence.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian" },
                { icon: "üêª", name: "Bear (‘±÷Ä’ª/Arj)", meaning: "Strength, courage, Armenia itself (Arj=bear)", info: "Armenian national animal. Protective power. Rare in carpets but significant when present.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Armenian" },
                { icon: "üêù", name: "Bee (’Ñ’•’≤’∏÷Ç/Meghu)", meaning: "Industry, community, divine organization, sweetness", info: "Hive = organized society. Honey = prosperity. Worker ethic. Rare but meaningful.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Armenian, Georgian" },
                { icon: "ü¶Ç", name: "Scorpion (‘ø’°÷Ä’´’≥/Karich)", meaning: "Protection, danger, desert survival, zodiac", info: "Apotropaic - protects by threatening evil. Zodiac sign. Desert regions. Tail sting prominent.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian, Turkmen" },
                { icon: "üê¢", name: "Turtle/Tortoise", meaning: "Longevity, stability, wisdom, cosmic support", info: "World-bearer in some cosmologies. Slow wisdom. Rare symbol. Protective shell.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian, Central Asian" },
                { icon: "üê†", name: "Fish (’Å’∏÷Ç’Ø/Dzuk)", meaning: "Abundance, fertility, water, Christian symbol", info: "Paired fish = fertility. Christian ichthys symbol. Water/life connection. Armenian church symbolism.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Armenian, Christian" },
                { icon: "ü¶Ö", name: "Falcon/Hawk (‘≤’°’¶’•/Baze)", meaning: "Hunting, nobility, keen sight, speed", info: "Noble hunting bird. Sharp vision = wisdom. Royal hunt symbol. Swift justice.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian, Caucasian" },
                { icon: "ü¶â", name: "Owl (‘≤’∏÷Ç/Bu)", meaning: "Wisdom, night vision, mystery, death", info: "Nocturnal knowledge. Sometimes ill omen. Athena's bird. Night guardian.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Armenian" },
                { icon: "ü¶¢", name: "Swan (‘ø’°÷Ä’°’∫/Karap)", meaning: "Grace, purity, transformation, fidelity", info: "Paired swans = eternal love. White = purity. Transformation (ugly duckling). Lake scenes.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Armenian, Persian" },
                { icon: "ü¶Ü", name: "Duck (‘≤’°’§/Bad)", meaning: "Adaptation, water-earth-air, resourceful", info: "Three element symbolism. Domestic bird. Paired = marital harmony. Water birds general.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian" },
                { icon: "üêì", name: "Hen (’Ä’°’æ/Hav)", meaning: "Motherhood, nurturing, fertility, domestic", info: "With chicks = motherhood. Egg-layer = fertility. Domestic abundance. Rural life.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Village carpets" },
                { icon: "ü™ø", name: "Goose (’ç’°’£/Sag)", meaning: "Vigilance, migration, seasonal change, fidelity", info: "Watchful guardian. Migration = seasons. Mate for life = fidelity. Honking = alarm.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian" },
                { icon: "ü¶ú", name: "Parrot (‘±’≤’°’≤’°’Ø/Aghaghak)", meaning: "Speech, imitation, exotic, colorful", info: "Trade connections. Exotic luxury. Speech/prophecy. Bright colors = joy.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian-influenced" },
                { icon: "üï∑Ô∏è", name: "Spider (’ç’°÷Ä’§/Sard)", meaning: "Weaving, fate, creation, patience", info: "Master weaver (carpet metaphor!). Web of fate. Patience creates beauty. Feminine creation.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Philosophical symbol" },
                
                // FLORAL & PLANT SYMBOLS
                { icon: "üåπ", name: "Rose (’é’°÷Ä’§/Vard)", meaning: "Love, beauty, paradise, Armenian identity", info: "Red rose = passion. White = purity. Karabakh famous for roses. 'Gul' carpets. Persian garden tradition.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Persian" },
                { icon: "üå∫", name: "Lotus", meaning: "Purity, enlightenment, rebirth, rising from mud", info: "Buddhist/Hindu symbol via Silk Road. Sacred flower. Rises pure from muddy water = spiritual transcendence.", value: "high", valueLabel: "HIGH VALUE", regions: "Persian, Silk Road" },
                { icon: "üå∑", name: "Tulip (‘º’°’¨’•/Lale)", meaning: "Perfect love, Ottoman luxury, spring, paradise", info: "Ottoman signature flower. 'Tulip Era' Turkey. Simple 3-petal form. Persian origin. Paradise garden.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Turkish, Persian" },
                { icon: "üåª", name: "Sunflower", meaning: "Sun worship, turning to divine, loyalty, summer", info: "Follows sun = devotion to God. Large medallion-like form. Later introduction (New World origin).", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Later carpets" },
                { icon: "üåº", name: "Carnation (’Ñ’•’≠’°’Ø/Mekhak)", meaning: "Divine love, pure affection, mother's love", info: "Christian passion flower. Ruffled petals distinctive. Pink/red common. Ottoman favorite.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Turkish, Armenian" },
                { icon: "üèµÔ∏è", name: "Rosette (General)", meaning: "Divine perfection, sun, radial harmony, center", info: "Geometric flower form. 6, 8, 12 petals common. Central medallion or scattered. Universal symbol.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "All regions" },
                { icon: "üçá", name: "Grape Vine (‘Ω’°’≤’∏’≤/Khaghagh)", meaning: "Wine, sacred blood, Georgian identity, abundance", info: "Georgian signature (ancient wine culture). Christian eucharist. Leaves and clusters. Harvest bounty.", value: "high", valueLabel: "HIGH VALUE (Georgian)", regions: "Georgian, Armenian" },
                { icon: "üçé", name: "Pomegranate (’Ü’∏÷Ç’º/Nur)", meaning: "Fertility, abundance, unity, Armenia symbol", info: "Many seeds = fertility. Unity in diversity. Armenian national symbol. Paradise fruit. Opened showing seeds.", value: "high", valueLabel: "HIGH VALUE", regions: "Armenian, Persian" },
                { icon: "üåæ", name: "Wheat Ear (’ë’∏÷Ä’•’∂/Ts'oren)", meaning: "Harvest, bread of life, prosperity, agricultural", info: "Staff of life. Harvest abundance. Rural wealth. Christian bread symbolism.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Agricultural regions" },
                { icon: "üåø", name: "Cypress Tree (’ç’°÷Ä’æ/Sarv)", meaning: "Eternity, mourning, graveyard, Zoroastrian sacred", info: "Evergreen = eternal life. Cemetery tree = death. Flame-like shape. Persian gardens. Zoroastrian holy tree.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian, Azerbaijani" },
                { icon: "üçÉ", name: "Leaf Scroll (Islimi)", meaning: "Growth, life force, Islamic art, continuous", info: "Flowing vine arabesque. Continuous growth. Islamic prohibition on figures = floral art excellence.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Islamic regions" },
                { icon: "üå∏", name: "Cherry Blossom", meaning: "Spring, renewal, ephemeral beauty, rebirth", info: "Brief bloom = life's transience. Spring renewal. Japanese/Persian garden influence.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian" },
                { icon: "ü™∑", name: "Water Lily", meaning: "Purity, floating grace, pond life, peace", info: "Floats on water = spiritual rising. Pond gardens. Related to lotus symbolism.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian gardens" },
                
                // GEOMETRIC & ABSTRACT SYMBOLS
                { icon: "üíé", name: "Diamond (Almast)", meaning: "Protection, evil eye, vaginal, feminine power", info: "Female symbol (womb). Elibelinde base form. Protective geometry. Stacked diamonds common.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Tribal carpets" },
                { icon: "üî∫", name: "Triangle (Muska)", meaning: "Amulet, protection, trinity, mountain", info: "Point up = masculine/fire. Point down = feminine/water. Trinity symbol. Caucasus mountains. Protective talisman.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "All regions" },
                { icon: "‚¨õ", name: "Square/Rectangle", meaning: "Earth, stability, four directions, order", info: "Four cardinal directions. Earthly realm. Stable foundation. Enclosed space = protection.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Geometric carpets" },
                { icon: "‚≠ï", name: "Circle", meaning: "Eternity, sun, wholeness, divine perfection", info: "No beginning/end = eternal. Sun disc. Mandala. Perfect divine form.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Medallion carpets" },
                { icon: "üí†", name: "Octagon", meaning: "Islamic architecture, transition square-circle, cosmic", info: "Eight directions. Dome transition geometry. Islamic tile work. Heaven/earth connection.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Islamic" },
                { icon: "üîÑ", name: "Swastika (Ha√ß)", meaning: "Ancient sun, good fortune, Aryan origin, pre-Nazi", info: "Right-facing = good fortune (pre-Nazi meaning only). Sun wheel. Indo-European. Caucasian pre-Christian.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Pre-1930 Caucasian" },
                { icon: "üëÅÔ∏è", name: "Evil Eye (Nazar)", meaning: "Protection from envy, ward off malice, blue eye", info: "Blue eye motif. Protective talisman. Deflects jealousy. Very common in Turkish/Caucasian.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Turkish, Caucasian" },
                { icon: "‚ö°", name: "Lightning (Yƒ±ldƒ±rƒ±m)", meaning: "Divine power, heaven's wrath, sudden illumination", info: "Zigzag diagonal patterns. God's power. Sudden truth. Sky fire. Kazak carpets.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian" },
                { icon: "‚òÄÔ∏è", name: "Sun (‘±÷Ä÷á/Arev)", meaning: "Life giver, divine light, Mithra worship, heat", info: "Solar worship (pre-Christian). Life source. Armenian Arev. Radial patterns. Central medallion often sun.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Pre-Christian Caucasian" },
                { icon: "üåô", name: "Moon/Crescent", meaning: "Islamic symbol, night, feminine, cycle, change", info: "Crescent with star = Islam. Lunar cycle = time/change. Feminine counterpart to sun.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Islamic" },
                { icon: "üí´", name: "Star Patterns (General)", meaning: "Heaven, divine guidance, night sky, fate", info: "Night sky representation. Divine order. Astrology. Multiple stars = cosmic arrangement.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "All regions" },
                { icon: "ü™¨", name: "Hamsa (Hand of Fatima)", meaning: "Protection, blessing, five fingers, warding", info: "Open palm. Five fingers. Islamic/Jewish protection. Ward off evil eye. Middle Eastern.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Islamic, Jewish" },
                { icon: "üî±", name: "Trident", meaning: "Triple power, Shiva, three realms, strength", info: "Rare in carpets. Hindu/Buddhist via trade. Three points = trinity/realms. Power symbol.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Trade route carpets" },
                { icon: "‚ôæÔ∏è", name: "Infinity/Endless Knot", meaning: "Eternal cycle, Buddhist wisdom, interconnection", info: "Buddhist endless knot. No beginning/end. Interconnected existence. Wisdom-compassion union.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Buddhist-influenced" },
                
                // SPECIAL PATTERNS & MOTIFS  
                { icon: "üèõÔ∏è", name: "Architectural (Buildings)", meaning: "Mosque, church, sacred space, prayer direction", info: "Mosque with minaret. Church with dome. Sacred architecture. Prayer rug specific.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Prayer rugs" },
                { icon: "‚õ≤", name: "Fountain/Water", meaning: "Paradise, life source, garden, purity", info: "Paradise garden water source. Persian chahar bagh. Life-giving water. Ritual purity.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Persian garden carpets" },
                { icon: "üïØÔ∏è", name: "Lamp/Kandil", meaning: "Divine light, mosque lamp, prayer, illumination", info: "Mosque lamp in prayer niche. Divine guidance light. Knowledge illumination. Hanging from mihrab.", value: "high", valueLabel: "HIGH VALUE", regions: "Prayer rugs" },
                { icon: "üìø", name: "Prayer Beads", meaning: "Devotion, counting prayers, meditation, Islam", info: "Islamic tasbih. 33 or 99 beads. Prayer counting. Devotional life.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Islamic" },
                { icon: "üó°Ô∏è", name: "Sword (’ç’∏÷Ç÷Ä/Sur)", meaning: "Warrior status, justice, Ali's Zulfiqar, power", info: "Double-edged = justice both ways. Zulfiqar (forked tip) = Shia Islam. Warrior class. Noble weapon.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Warrior cultures" },
                { icon: "üèπ", name: "Bow & Arrow", meaning: "Hunter, warrior, distance power, precision", info: "Hunting nobility. Military prowess. Striking from distance. Precision/skill.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Nomadic cultures" },
                { icon: "üõ°Ô∏è", name: "Shield", meaning: "Protection, defense, warrior, clan emblem", info: "Military protection. Clan identity. Defensive power. Coat of arms equivalent.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Warrior carpets" },
                { icon: "üëë", name: "Crown", meaning: "Royalty, divine authority, sovereignty, heaven", info: "Royal power. Divine right. Stepped crown = castle battlements. Heavenly crown.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Royal workshop carpets" },
                { icon: "üî•", name: "Fire/Flame", meaning: "Zoroastrian sacred, purification, divine, passion", info: "Zoroastrian sacred fire. Purification. Divine presence. Passion/love. Boteh flame.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Zoroastrian, Persian" },
                { icon: "üåä", name: "Water Waves", meaning: "Life source, flow, purification, change", info: "Flowing water = life. River of life. Purification ritual. Constant change/flow.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Border patterns" },
                { icon: "‚õ∞Ô∏è", name: "Mountain (‘º’•’º/Ler)", meaning: "Caucasus, sacred peak, Ararat, divine dwelling", info: "Mt. Ararat = Armenian sacred. Caucasus peaks. Gods' dwelling. Spiritual ascent. Stepped forms.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Caucasian" },
                { icon: "üåà", name: "Rainbow", meaning: "Divine covenant, bridge, hope, Noah's promise", info: "Biblical covenant. Heaven-earth bridge. After storm hope. Seven colors. Rare but meaningful.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Christian Armenian" },
                { icon: "‚òÅÔ∏è", name: "Clouds", meaning: "Heaven, divine realm, transformation, rain blessing", info: "Cloudbands (chi). Divine realm. Rain bringer = blessing. Sky symbols. Chinese influence.", value: "medium", valueLabel: "MEDIUM VALUE", regions: "Silk Road carpets" }
            ];
        }

        function getRegionData(region) {
            const data = {
                armenia: {
                    name: "üá¶üá≤ Armenian Carpets",
                    period: "1700-1920 (Golden Age)",
                    types: "Karabakh, Kazak, Erivan",
                    value: "$4,000-$80,000+",
                    lookFor: [
                        "Dragon (vishap) motifs - S-curved forms",
                        "Armenian cross (khachkar) patterns",
                        "Cloudband designs (pre-1850 Karabakh)",
                        "Woven Armenian inscriptions or dates",
                        "Deep indigo + rich madder red colors",
                        "Thick pile with wool warps"
                    ],
                    tip: "Armenian carpets often have distinctive 'hand' - wool feels coarser than Persian. If you see Armenian letters woven anywhere, photograph immediately. These are rare and valuable."
                },
                azerbaijan: {
                    name: "üá¶üáø Azerbaijani Carpets",
                    period: "1800-1930 (Peak Quality)",
                    types: "Shirvan, Kuba, Baku, Ganja",
                    value: "$5,000-$60,000+",
                    lookFor: [
                        "Prayer rugs with mihrab arch - PRIORITY",
                        "Very fine weaving (150-250 KPSI) = Kuba",
                        "Boteh (paisley) patterns in rows",
                        "Running dog borders",
                        "Dark blue/black grounds with ivory",
                        "Chi-Chi diagonal lattice (premium)"
                    ],
                    tip: "Shirvan prayer rugs under $2,000 in good condition = buy immediately. Turn carpet over - pattern should be clearly visible on reverse. If fuzzy/unclear, likely reproduction."
                },
                georgia: {
                    name: "üá¨üá™ Georgian Carpets",
                    period: "1850-1920",
                    types: "Karachov, Tbilisi, Kilims",
                    value: "$1,000-$20,000",
                    lookFor: [
                        "Christian cross motifs + Caucasian geometric",
                        "Grape vine borders (winemaking tradition)",
                        "Georgian script inscriptions",
                        "Bold stripes in kilims",
                        "Cruciform medallions"
                    ],
                    tip: "Georgian carpets significantly UNDERVALUED vs Armenian/Azerbaijani. Christian symbolism authenticates Georgian origin. Focus on pieces locals don't recognize value of."
                },
                albania: {
                    name: "üá¶üá± Albanian Textiles",
                    period: "1850-1970",
                    types: "Kilims (Qilim), √áerga, rare Gjilim pile",
                    value: "$300-$15,000",
                    lookFor: [
                        "Large diamond medallions",
                        "Zigzag patterns",
                        "Slit-weave technique",
                        "Dark wool warps (brown/grey)",
                        "Albanian pile rugs = RARE, high value",
                        "Distinctive thick cord selvedge"
                    ],
                    tip: "EMERGING MARKET - prices rising 20-30% annually. Pre-1900 kilims can be purchased for $500-$1,500 that sell for $3,000-$8,000 in Western markets. Focus on documented village provenance."
                },
                bulgaria: {
                    name: "üáßüá¨ Bulgarian Carpets",
                    period: "1850-1930 (Peak Quality)",
                    types: "Chiprovtsi UNESCO, Kotel, Rhodope",
                    value: "$800-$40,000",
                    lookFor: [
                        "REVERSIBILITY - pattern identical both sides (Chiprovtsi)",
                        "Diagonal ribs on surface texture",
                        "Chiprovtsi rose motif",
                        "100% wool (no cotton in authentic old pieces)",
                        "Natural dyes with rich vibrant colors",
                        "Christian crosses + Ottoman patterns"
                    ],
                    tip: "Chiprovtsi carpets are among most UNDERVALUED European textiles. UNESCO-recognized yet sell 50-70% less than Turkish equivalents. Pre-1920 Chiprovtsi in excellent condition for $3K-$8K would sell $15K-$30K in London/NYC."
                }
            };
            return data[region];
        }

        // Initialize
        window.onload = () => {
            renderSymbols();
        };
    </script>
</body>
</html>
